(this["webpackJsonpimage-resizer-frontend"]=this["webpackJsonpimage-resizer-frontend"]||[]).push([[0],{109:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(28),o=n.n(a),i=n(35),s=n.n(i),l=n(14),d=n(50),u=n(13),j=n(165),b=n(166),f=n(156),h=n(159),O=n(168),g=n(170),m=n(163),x=n(162),p=n(164),v=n(81),w=n.n(v),y="".concat(window.location.origin),k=function(){var e=Object(d.a)(s.a.mark((function e(t){var n,r,c,a,o,i,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=void 0===n?"":n,c=t.body,a=t.method,o=void 0===a?"GET":a,e.next=3,fetch("".concat(y,"/").concat(r),{method:o,body:c});case 3:return i=e.sent,e.next=6,i.json();case 6:if(l=e.sent,!i.ok){e.next=11;break}return e.abrupt("return",l);case 11:throw new Error(l.message);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=n(152),S=n(157),C=n(167),z=n(169),E=n(161),L=n(79),A=n.n(L),M=n(80),B=n.n(M),H=n(78),R=n.n(H),T=n(2),D=function(e){var t=e.imageId,n=e.removeImage,c=e.setOpenSnackbar,a=Object(E.a)(),o=Object(u.a)(a,2)[1],i=Object(r.useState)(),s=Object(u.a)(i,2),l=s[0],d=s[1],b=Object(r.useState)(),f=Object(u.a)(b,2),h=f[0],g=f[1],p=Object(r.useMemo)((function(){return"".concat(y,"/").concat(t).concat(l?"?w=".concat(l):"").concat(h?"&h=".concat(h):"")}),[l,h,t]);return Object(T.jsx)(x.a,{item:!0,xs:6,children:Object(T.jsx)(C.a,{elevation:0,variant:"outlined",width:"100%",children:Object(T.jsx)(j.a,{p:2,children:Object(T.jsxs)(j.a,{display:"grid",gridTemplateColumns:"1fr 2fr",gap:2,children:[Object(T.jsx)("img",{src:"".concat(y,"/").concat(t),alt:"serverless cloud images",loading:"lazy",style:{width:"100%",maxHeight:120,minHeight:120,borderRadius:6}}),Object(T.jsxs)(I.a,{justifyContent:"space-between",children:[Object(T.jsxs)(j.a,{children:[Object(T.jsxs)(I.a,{direction:"row",justifyContent:"space-between",children:[Object(T.jsx)(O.a,{variant:"subtitle2",gutterBottom:!0,children:"Image size"}),Object(T.jsx)(z.a,{color:"secondary",size:"small",onClick:function(){return n(t)},children:Object(T.jsx)(R.a,{fontSize:"small"})})]}),Object(T.jsxs)(x.a,{container:!0,spacing:2,children:[Object(T.jsx)(x.a,{item:!0,xs:6,children:Object(T.jsx)(S.a,{type:"number",variant:"outlined",onChange:function(e){return d(e.target.value)},size:"small",style:{width:"100%"},placeholder:"width"})}),Object(T.jsx)(x.a,{item:!0,xs:6,children:Object(T.jsx)(S.a,{type:"number",variant:"outlined",onChange:function(e){return g(e.target.value)},size:"small",style:{width:"100%"},placeholder:"height"})})]})]}),Object(T.jsxs)(x.a,{container:!0,spacing:2,children:[Object(T.jsx)(x.a,{item:!0,xs:6,children:Object(T.jsx)(m.a,{startIcon:Object(T.jsx)(A.a,{}),size:"small",color:"secondary",style:{width:"100%"},onClick:function(){c(!0),o(p)},children:"Copy URL"})}),Object(T.jsx)(x.a,{item:!0,xs:6,children:Object(T.jsx)(m.a,{startIcon:Object(T.jsx)(B.a,{}),size:"small",color:"secondary",style:{width:"100%"},onClick:function(){window.open(p)},children:"Download Image"})})]})]})]})})})})},J=n(82),U=Object(J.a)({palette:{mode:"dark",primary:{main:"#FD5750"},secondary:{main:"#818181"}},components:{MuiCssBaseline:{styleOverrides:{body:{backgroundColor:"black",minHeight:"100vh",padding:"40px",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}}},MuiSnackbarContent:{styleOverrides:{root:{justifyContent:"center",alignItems:"center",padding:0,background:"#4caf50",color:"#fff"}}},MuiButton:{styleOverrides:{root:{textTransform:"none"}}},MuiOutlinedInput:{styleOverrides:{root:{border:"1px solid #222222"},input:{padding:"8px 10px",fontSize:12,"&::placeholder":{color:"#818181",fontWeight:500}},notchedOutline:{border:"none"}}}}});var F=function(e,t){var n=function(){if("undefined"===typeof window)return t;try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(r){return console.warn('Error reading localStorage key "'.concat(e,'":'),r),t}},c=Object(r.useState)(n),a=Object(u.a)(c,2),o=a[0],i=a[1];return Object(r.useEffect)((function(){i(n())}),[]),Object(r.useEffect)((function(){var e=function(){i(n())};return window.addEventListener("storage",e),window.addEventListener("local-storage",e),function(){window.removeEventListener("storage",e),window.removeEventListener("local-storage",e)}}),[]),[o,function(t){"undefined"==typeof window&&console.warn('Tried setting localStorage key "'.concat(e,'" even though environment is not a client'));try{var n=t instanceof Function?t(o):t;window.localStorage.setItem(e,JSON.stringify(n)),i(n),window.dispatchEvent(new Event("local-storage"))}catch(r){console.warn('Error setting localStorage key "'.concat(e,'":'),r)}}]},N=n.p+"static/media/serverless-cloud-text.70f41d4b.svg",P=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),o=Object(u.a)(a,2),i=o[0],f=o[1],p=F("serverless-images",[]),v=Object(u.a)(p,2),y=v[0],I=v[1],S=Object(r.useRef)(),C=function(e){return new Promise((function(t){var n=new FileReader;n.addEventListener("load",(function(){var e=n.result;t(e)})),n.readAsArrayBuffer(e)}))},z=function(){var e=Object(d.a)(s.a.mark((function e(t){var n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.prev=1,e.next=4,C(t);case 4:return n=e.sent,e.next=7,k({body:n,method:"PUT"});case 7:r=e.sent,c=null===r||void 0===r?void 0:r.url.split("/").pop(),console.log("newId",c),I([c].concat(Object(l.a)(y||[]))),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(1);case 15:f(!1);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),E=function(e){I(y.filter((function(t){return t!==e})))};return Object(T.jsxs)(j.a,{children:[Object(T.jsx)(h.a,{open:n,autoHideDuration:1e3,onClose:function(){return c(!1)},message:"Image URL copied",anchorOrigin:{vertical:"bottom",horizontal:"center"}}),Object(T.jsxs)(j.a,{textAlign:"center",children:[Object(T.jsx)("img",{src:N,alt:"serverless cloud"}),Object(T.jsx)(O.a,{variant:"h3",color:"#fff",fontWeight:"bold",textAlign:"center",mb:15,children:"Host and resize images"})]}),Object(T.jsxs)(g.a,{children:[Object(T.jsxs)(j.a,{width:200,margin:"auto",textAlign:"center",children:[Object(T.jsx)("input",{accept:"image/*",type:"file",style:{display:"none"},onChange:function(e){return z(e.target.files[0])},ref:S}),i?Object(T.jsx)(j.a,{textAlign:"center",children:Object(T.jsx)(b.a,{color:"primary"})}):Object(T.jsx)(m.a,{variant:"contained",color:"primary",startIcon:Object(T.jsx)(w.a,{}),onClick:function(){var e;return null===S||void 0===S||null===(e=S.current)||void 0===e?void 0:e.click()},size:"large",style:{width:200,height:50},children:"Upload Image"})]}),Object(T.jsx)(j.a,{mt:15,children:(null===y||void 0===y?void 0:y.length)?Object(T.jsx)(x.a,{container:!0,spacing:2,children:y.map((function(e){return Object(T.jsx)(D,{imageId:e,setOpenSnackbar:c,removeImage:E},e)}))}):null})]})]})},W=function(){return Object(T.jsxs)(p.a,{theme:U,children:[Object(T.jsx)(f.a,{}),Object(T.jsx)(P,{})]})};o.a.render(Object(T.jsx)(c.a.StrictMode,{children:Object(T.jsx)(W,{})}),document.getElementById("root"))}},[[109,1,2]]]);
//# sourceMappingURL=main.da06e4b5.chunk.js.map